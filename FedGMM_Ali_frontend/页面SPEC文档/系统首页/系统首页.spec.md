# 系统首页 SPEC 文档

## 1. 页面功能描述

### 1.1 核心功能

- **系统介绍**：展示系统名称、简介和核心功能
- **快速入口**：提供两条展示主线的快速入口（训练过程展示、用户推荐使用）
- **系统状态**：显示数据加载状态、可用城市、可用轮次等系统信息
- **导航菜单**：提供所有功能页面的导航链接

### 1.2 辅助功能

- **快速开始说明**：提供系统使用的简要指南
- **论文章节对应**：显示与论文章节的对应关系

## 2. 交互流程

### 2.1 页面加载流程

1. **初始化**：页面加载时，初始化系统配置和数据状态
2. **数据检查**：检查训练日志和模型文件是否存在
3. **状态更新**：更新系统状态信息（数据是否加载、可用城市、可用轮次）
4. **渲染页面**：渲染页面组件和快速入口

### 2.2 用户操作流程

1. **导航操作**：
   - 用户点击侧边栏导航菜单，跳转到对应页面
   - 用户点击快速入口按钮，跳转到对应功能区

2. **状态查看**：
   - 用户查看系统状态信息，了解数据加载情况

## 3. 数据字段定义

### 3.1 输入数据

| 字段名 | 类型 | 描述 | 来源 |
|--------|------|------|------|
| `data_loaded` | boolean | 数据是否加载 | 系统检查 |
| `available_cities` | list | 可用城市列表 | 配置文件 |
| `available_rounds` | list | 可用训练轮次 | 训练日志 |
| `system_status` | string | 系统状态描述 | 系统检查 |

### 3.2 输出数据

| 字段名 | 类型 | 描述 | 用途 |
|--------|------|------|------|
| `navigation_items` | list | 导航菜单项 | 页面导航 |
| `quick_access_items` | list | 快速入口项 | 快速导航 |
| `status_message` | string | 状态消息 | 显示系统状态 |

## 4. 接口调用规范

### 4.1 内部接口

| 接口名 | 参数 | 返回值 | 功能描述 | 调用时机 |
|--------|------|--------|----------|----------|
| `check_data_availability` | 无 | `{loaded: boolean, cities: list, rounds: list}` | 检查数据可用性 | 页面加载时 |
| `get_system_status` | 无 | `string` | 获取系统状态 | 页面加载时 |

### 4.2 外部依赖

| 依赖项 | 类型 | 用途 | 调用时机 |
|--------|------|------|----------|
| `config.json` | 配置文件 | 读取系统配置 | 页面初始化 |
| `data/` 目录 | 目录 | 检查数据文件存在性 | 数据可用性检查 |

## 5. 异常处理机制

### 5.1 异常类型

| 异常类型 | 描述 | 处理方式 |
|----------|------|----------|
| **数据文件缺失** | 训练日志或模型文件不存在 | 显示警告信息，提示用户准备数据 |
| **配置文件错误** | 配置文件格式错误或缺失 | 显示错误信息，使用默认配置 |
| **系统初始化失败** | 系统初始化过程中出现错误 | 显示错误信息，提供重试选项 |

### 5.2 错误提示

- **数据文件缺失**：`st.warning("数据文件未找到，请检查 data/ 目录")`
- **配置文件错误**：`st.error("配置文件错误，使用默认配置")`
- **系统初始化失败**：`st.error("系统初始化失败，请检查日志")`

## 6. 性能要求

### 6.1 加载性能

- **页面加载时间**：≤ 2秒
- **数据检查时间**：≤ 1秒

### 6.2 交互性能

- **导航响应时间**：≤ 0.5秒
- **状态更新频率**：每30秒自动更新一次

### 6.3 资源使用

- **内存使用**：≤ 100MB
- **CPU 使用率**：≤ 10%

## 7. 页面布局与组件

### 7.1 布局结构

- **顶部**：系统标题和简介
- **中部**：两条展示主线入口（训练过程展示、用户推荐使用）
- **底部**：系统状态信息和快速开始说明

### 7.2 核心组件

| 组件名 | 类型 | 描述 | 位置 |
|--------|------|------|------|
| `st.title` | 标题组件 | 系统标题 | 顶部 |
| `st.markdown` | 文本组件 | 系统简介 | 标题下方 |
| `st.columns` | 布局组件 | 快速入口按钮 | 中部 |
| `st.info` | 信息组件 | 系统状态 | 底部 |
| `st.sidebar` | 侧边栏组件 | 导航菜单 | 左侧 |

### 7.3 组件配置

- **标题**：`st.title("城市旅游消费个性化推荐系统展示平台")`
- **快速入口**：使用 `st.columns(2)` 创建两个按钮列
- **状态信息**：使用 `st.info()` 显示系统状态
- **导航菜单**：使用 `st.sidebar.radio()` 创建导航选项

## 8. 实现注意事项

### 8.1 数据检查

- 实现 `check_data_availability` 函数，检查数据文件是否存在
- 实现 `get_system_status` 函数，生成系统状态描述

### 8.2 性能优化

- 使用缓存机制缓存数据检查结果，减少重复检查
- 异步加载数据检查，避免阻塞页面渲染

### 8.3 用户体验

- 提供清晰的导航选项和快速入口
- 显示详细的系统状态信息，帮助用户了解系统情况
- 提供简洁的快速开始说明，帮助用户快速上手

## 9. 测试要点

### 9.1 功能测试

- 验证页面加载是否正常
- 验证导航菜单是否可正常工作
- 验证快速入口是否可正常跳转
- 验证系统状态信息是否准确

### 9.2 异常测试

- 测试数据文件缺失时的处理
- 测试配置文件错误时的处理
- 测试系统初始化失败时的处理

### 9.3 性能测试

- 测试页面加载时间
- 测试数据检查性能
- 测试导航响应时间

## 10. 版本控制

| 版本 | 日期 | 作者 | 变更内容 |
|------|------|------|----------|
| v1.0 | 2026-02-13 | 系统架构师 | 初始版本 |