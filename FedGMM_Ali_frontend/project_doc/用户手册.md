# 用户手册

## 1. 系统介绍

### 1.1 系统概述

城市旅游消费个性化推荐系统是一个基于联邦学习和混合模型技术的推荐系统，旨在展示通信开销低、个性化推荐更精准、自适应本地迭代等创新点。系统分为两条主线：训练过程展示和用户推荐使用。

### 1.2 系统功能

- **训练过程展示**：查看通信压缩效果、自适应迭代轨迹、个性化权重分布等训练过程数据
- **用户推荐使用**：基于已训练模型，获取不同城市的个性化旅游消费推荐

### 1.3 系统架构

系统采用前后端分离的架构设计，后端使用Flask框架实现API接口，前端使用HTML、CSS和JavaScript实现页面布局和交互逻辑。系统分为四层：前端展示层、可视化分析层、业务场景模拟层和模型结果层。

## 2. 快速开始

### 2.1 环境要求

- **后端环境**：Python 3.8+，Flask 2.0+，Flask-CORS 3.0+
- **前端环境**：现代Web浏览器（Chrome、Firefox、Safari、Edge等）

### 2.2 安装与运行

1. **安装后端依赖**：

   ```bash
   # 进入项目根目录
   cd FedGMM_Ali_frontend
   
   # 安装依赖
   pip install -r backend/requirements.txt
   ```

2. **启动后端服务**：

   ```bash
   # 进入后端目录
   cd backend
   
   # 启动服务
   python app.py
   ```

3. **访问前端页面**：

   在浏览器中打开 `frontend/index.html` 文件，即可进入系统首页。

### 2.3 系统状态检查

在系统首页的"系统状态"部分，可以查看系统的数据加载状态、可用城市和可用训练轮次。如果系统状态显示"系统正常运行，所有数据已加载"，则表示系统已准备就绪。

## 3. 功能页面使用指南

### 3.1 首页

首页是系统的入口页面，包含以下内容：

- **系统介绍**：简要介绍系统的功能和特点
- **快速入口**：提供训练过程展示和用户推荐使用的快速入口
- **系统状态**：显示系统的数据加载状态、可用城市和可用训练轮次
- **论文章节对应**：展示系统功能与论文章节的对应关系
- **快速开始说明**：提供系统使用的详细步骤说明

### 3.2 通信压缩分析页面

通信压缩分析页面用于展示通信压缩数据，包含以下功能：

- **参数配置**：
  - 客户端选择：选择要查看的客户端
  - 轮次范围：设置要查看的轮次范围
  - 刷新按钮：根据配置参数刷新数据

- **统计摘要**：显示总轮次、平均压缩比例、总节省量和节省百分比

- **压缩比例图表**：展示压缩比例随轮次变化的曲线

- **通信统计表**：展示详细的通信统计数据，包括轮次、客户端、原始大小、压缩后大小、压缩比例、节省量和节省百分比

- **数据导出**：将通信统计数据导出为CSV格式

### 3.3 自适应迭代分析页面

自适应迭代分析页面用于展示自适应迭代数据，包含以下功能：

- **参数配置**：
  - 客户端选择：选择要查看的客户端
  - 轮次范围：设置要查看的轮次范围
  - 刷新按钮：根据配置参数刷新数据

- **统计摘要**：显示总轮次、平均τ*、最大τ*和最小τ*

- **τ*趋势图表**：展示τ*随轮次变化的曲线

- **准确率和损失图表**：展示准确率和损失随轮次变化的曲线

- **自适应迭代数据表**：展示详细的自适应迭代数据，包括轮次、客户端、τ*、准确率和损失

- **数据导出**：将自适应迭代数据导出为CSV格式

### 3.4 个性化权重分析页面

个性化权重分析页面用于展示个性化权重数据，包含以下功能：

- **参数配置**：
  - 客户端选择：选择要查看的客户端
  - 轮次选择：选择要查看的训练轮次
  - 刷新按钮：根据配置参数刷新数据

- **统计摘要**：显示总轮次、总客户端、平均个性化准确率和平均全局准确率

- **γ权重分布图表**：展示不同客户端的γ权重分布

- **γ权重趋势图表**：展示γ权重随轮次变化的趋势

- **个性化权重数据表**：展示详细的个性化权重数据，包括轮次、客户端、子模型权重、个性化准确率和全局准确率

- **数据导出**：将个性化权重数据导出为CSV格式

### 3.5 推荐展示页面

推荐展示页面用于展示个性化推荐结果，包含以下功能：

- **参数配置**：
  - 城市选择：选择要查看的城市
  - 用户ID：输入用户ID
  - Top-K：设置推荐结果数量
  - 训练轮次：选择训练轮次
  - 生成推荐按钮：根据配置参数生成推荐结果

- **推荐结果**：展示个性化推荐结果，包括排名、景点名称、类别、评分、价格和热度

- **推荐结果可视化**：展示推荐结果的评分和热度可视化

- **多城市对比**：
  - 选择要对比的城市
  - 生成对比按钮：生成多城市推荐对比结果
  - 对比结果：展示不同城市的推荐结果对比

- **数据导出**：将推荐结果导出为CSV格式

### 3.6 综合对比页面

综合对比页面用于展示系统的整体性能和创新点评估，包含以下功能：

- **参数配置**：
  - 训练轮次：选择训练轮次
  - 对比维度：选择要对比的维度
  - 生成综合对比按钮：根据配置参数生成综合对比结果

- **系统性能概览**：展示平均压缩比例、平均τ*、平均个性化准确率和平均推荐评分

- **训练轮次对比**：展示不同训练轮次的压缩比例、准确率和个性化准确率对比

- **客户端性能对比**：展示不同客户端的压缩比例、τ*和个性化准确率对比

- **创新点评估**：展示通信开销低、个性化推荐、自适应迭代和系统稳定性的评估结果

- **详细对比数据**：展示系统与传统联邦学习的详细对比数据

## 4. 常见问题

### 4.1 系统启动问题

**问题**：后端服务启动失败，提示缺少依赖模块。

**解决方案**：确保已安装所有必要的依赖模块，可使用以下命令安装：

```bash
pip install -r backend/requirements.txt
```

### 4.2 数据加载问题

**问题**：系统状态显示"系统运行中，缺少数据"。

**解决方案**：确保数据文件已正确放置在 `data/` 目录下，包括通信数据、γ权重数据、τ*数据和模型数据。

### 4.3 推荐结果问题

**问题**：推荐结果为空或不符合预期。

**解决方案**：检查用户ID是否有效，训练轮次是否正确，以及数据文件是否完整。

### 4.4 图表显示问题

**问题**：图表无法显示或显示异常。

**解决方案**：确保浏览器支持Chart.js库，可尝试刷新页面或使用其他现代Web浏览器。

### 4.5 数据导出问题

**问题**：数据导出失败或导出文件为空。

**解决方案**：确保页面中有数据可导出，可尝试刷新页面后重新导出。

## 5. 高级功能

### 5.1 自定义数据

用户可以通过修改后端的数据文件来自定义系统使用的数据，包括：

- **通信数据**：修改 `data/communication/` 目录下的数据文件
- **γ权重数据**：修改 `data/gamma/` 目录下的数据文件
- **τ*数据**：修改 `data/tau/` 目录下的数据文件
- **模型数据**：修改 `data/models/` 目录下的数据文件

### 5.2 扩展功能

系统支持通过以下方式扩展功能：

- **添加新城市**：在后端的 `system.py` 文件中修改 `available_cities` 列表
- **添加新客户端**：在后端的API接口中添加新的客户端数据
- **添加新图表**：在前端的 `ChartGenerator` 模块中添加新的图表类型

## 6. 总结

城市旅游消费个性化推荐系统是一个功能完善、界面友好的推荐系统，通过展示通信压缩效果、自适应迭代轨迹、个性化权重分布等训练过程数据，以及提供基于已训练模型的城市旅游消费推荐功能，直观展示了联邦学习和混合模型技术的优势。

系统采用前后端分离的架构设计和模块化的实现方式，具有良好的可维护性和可扩展性。用户可以通过本手册快速了解系统的功能和使用方法，从而更好地使用系统。

如果您在使用过程中遇到任何问题，请参考本手册的"常见问题"部分，或联系系统管理员获取帮助。