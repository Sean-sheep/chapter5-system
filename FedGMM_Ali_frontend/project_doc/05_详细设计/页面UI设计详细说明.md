# 页面UI设计详细说明文档

## 1. 设计原则

- **简洁直观**：界面简洁，功能明确，适合论文展示
- **信息层次**：重要信息突出，次要信息可折叠
- **交互友好**：操作简单，反馈及时
- **视觉统一**：主色蓝色系，成功绿、警告橙、错误红，背景浅灰/白

---

## 2. Streamlit 组件使用规范

### 2.1 布局

- **侧边栏**：`st.sidebar` 放置导航、城市选择、用户 ID、轮次、Top-K 等
- **列布局**：`st.columns(3)` 放置指标卡或功能入口
- **容器**：`st.container()` 划分推荐结果、图表等区域

### 2.2 输入组件

- **下拉**：`st.selectbox("选择城市", ["Tokyo", "Osaka", "Nagoya"], ...)`
- **数字**：`st.number_input("用户ID", min_value=0, max_value=99999, value=123)`
- **多选**：`st.multiselect("选择对比城市", cities, default=[...])`
- **滑块**：`st.slider("轮次范围", 0, 99, (0, 99))`

### 2.3 展示组件

- **表格**：`st.dataframe(df, use_container_width=True, height=400)`
- **指标**：`st.metric("平均压缩比例", "0.20", delta="-0.02", delta_color="inverse")`
- **图表**：`st.plotly_chart(fig, use_container_width=True)`
- **提示**：`st.info()` / `st.success()` / `st.error()` / `st.warning()`

### 2.4 反馈与导出

- **加载**：`with st.spinner("正在加载..."): ...`
- **导出**：`st.download_button("导出CSV", data=csv, file_name="xxx.csv", mime="text/csv")`

---

## 3. 各页面 UI 要点

### 3.1 系统首页

- 标题：`st.title("城市旅游消费个性化推荐系统展示平台")`
- 简介：`st.markdown()` 说明系统功能与双线（训练过程展示 / 用户推荐使用）
- 快速入口：三列按钮或链接进入「推荐展示」「通信分析」「权重分析」
- 状态：`st.info()` 显示数据是否加载、可用城市、可用轮次

### 3.2 推荐展示页面

- **侧边栏**：城市 selectbox、用户 ID number_input、Top-K selectbox、训练轮次 selectbox（最新/指定轮次）、「生成推荐」按钮
- **主区**：若已生成，显示推荐结果 dataframe（排名、商品 ID、名称、评分）、导出 CSV；下方多选城市 +「对比推荐」按钮，展示多城市对比表格或并排列表

### 3.3 通信压缩分析页面

- **侧边栏**：客户端选择（全部/指定）、轮次范围 slider、「刷新数据」按钮
- **主区**：压缩比例随轮次折线图（Plotly）；通信统计 dataframe；四列 metric（总轮次、平均压缩比例、总节省量、节省百分比）；导出统计数据

### 3.4 自适应迭代分析页面

- **侧边栏**：多选客户端（可显示为城市名）、轮次范围、「刷新数据」按钮
- **主区**：τ* 随轮次折线图（多线）；五列 metric（平均 τ*、标准差、最小、最大、自适应频率）；客户端对比 dataframe；导出

### 3.5 个性化权重分析页面

- **侧边栏**：训练轮次、城市选择（全部/指定）、「刷新数据」按钮
- **主区**：γ 分布分组柱状图（X=城市，Y=权重，color=子模型）；权重对比 dataframe；可选：选择城市与子模型后展示 γ 随轮次趋势图；导出

### 3.6 综合对比页面

- **侧边栏**：多选城市、用户 ID、训练轮次、「生成对比」按钮
- **主区**：推荐差异热力图（城市×商品，颜色=评分）；指标对比 dataframe（HR@K、NDCG@K、RMSE 等，可按城市高亮）；综合性能分析文字说明

---

## 4. 通用规范

- **错误处理**：文件缺失或格式错误时用 `st.error()` 提示，并给出检查建议
- **数据缓存**：使用 `@st.cache_data` 缓存日志读取与统计计算，减少重复 IO
- **响应式**：图表使用 `use_container_width=True`，表格可设置合理 height
- **导出**：关键表格与图表支持导出 CSV 或图片，便于论文插图

---

## 5. 与 06 架构方案的关系

- 页面划分与「训练过程展示」「用户推荐使用」双线逻辑以 **06_系统架构方案（待确认）** 为准
- 训练过程展示各页数据来自**训练日志**；用户推荐使用各页数据来自**已训练模型推理**
- 本文档侧重 UI 组件与布局，具体展示项与依赖字段见《页面与创新点对应表》
