# 功能使用文档

## 1. 文档目的

本文档旨在详细说明城市旅游消费个性化推荐系统的各个功能模块的使用方法，帮助用户快速上手并充分利用系统的各项功能。

## 2. 适用范围

本文档适用于所有使用城市旅游消费个性化推荐系统的用户，包括系统管理员、开发人员和普通用户。

## 3. 系统功能概述

城市旅游消费个性化推荐系统基于联邦学习和混合模型技术，主要分为两条主线：训练过程展示和用户推荐使用。

### 3.1 训练过程展示

- **通信压缩分析**：展示通信压缩效果，包括压缩比例变化曲线和通信统计数据
- **自适应迭代分析**：展示自适应迭代轨迹，包括τ*趋势曲线和准确率/损失变化
- **个性化权重分析**：展示个性化权重分布，包括γ权重分布和γ权重趋势

### 3.2 用户推荐使用

- **个性化推荐**：基于已训练模型，获取不同城市的个性化旅游消费推荐
- **多城市对比**：比较不同城市的推荐结果，分析推荐差异
- **综合对比**：评估系统整体性能，展示创新点效果

## 4. 功能页面详细使用指南

### 4.1 首页

**功能描述**：系统的入口页面，提供系统介绍、快速入口、系统状态和快速开始说明。

**使用步骤**：
1. 在浏览器中打开 `frontend/index.html` 文件，进入系统首页
2. 查看系统状态，确认系统是否正常运行
3. 通过快速入口进入相应的功能页面

**页面元素**：
- 系统介绍：简要介绍系统的功能和特点
- 快速入口：提供训练过程展示和用户推荐使用的快速入口
- 系统状态：显示系统的数据加载状态、可用城市和可用训练轮次
- 论文章节对应：展示系统功能与论文章节的对应关系
- 快速开始说明：提供系统使用的详细步骤说明

### 4.2 通信压缩分析页面

**功能描述**：展示通信压缩数据，包括压缩比例变化曲线和通信统计数据。

**使用步骤**：
1. 从首页点击「通信压缩分析」快速入口，进入通信压缩分析页面
2. 在「参数配置」部分，选择要查看的客户端和轮次范围
3. 点击「刷新」按钮，根据配置参数刷新数据
4. 查看「统计摘要」部分，了解总轮次、平均压缩比例、总节省量和节省百分比
5. 查看「压缩比例图表」，了解压缩比例随轮次变化的趋势
6. 查看「通信统计表」，了解详细的通信统计数据
7. 点击「导出CSV」按钮，将通信统计数据导出为CSV格式

**参数说明**：
- 客户端选择：选择要查看的客户端，可选择多个客户端
- 轮次范围：设置要查看的轮次范围，最小值和最大值

**结果说明**：
- 压缩比例图表：展示不同客户端的压缩比例随轮次变化的曲线
- 通信统计表：展示详细的通信统计数据，包括轮次、客户端、原始大小、压缩后大小、压缩比例、节省量和节省百分比

### 4.3 自适应迭代分析页面

**功能描述**：展示自适应迭代数据，包括τ*趋势曲线和准确率/损失变化。

**使用步骤**：
1. 从首页点击「自适应迭代分析」快速入口，进入自适应迭代分析页面
2. 在「参数配置」部分，选择要查看的客户端和轮次范围
3. 点击「刷新」按钮，根据配置参数刷新数据
4. 查看「统计摘要」部分，了解总轮次、平均τ*、最大τ*和最小τ*
5. 查看「τ*趋势图表」，了解τ*随轮次变化的趋势
6. 查看「准确率和损失图表」，了解准确率和损失随轮次变化的趋势
7. 查看「自适应迭代数据表」，了解详细的自适应迭代数据
8. 点击「导出CSV」按钮，将自适应迭代数据导出为CSV格式

**参数说明**：
- 客户端选择：选择要查看的客户端，可选择多个客户端
- 轮次范围：设置要查看的轮次范围，最小值和最大值

**结果说明**：
- τ*趋势图表：展示不同客户端的τ*随轮次变化的曲线
- 准确率和损失图表：展示不同客户端的准确率和损失随轮次变化的曲线
- 自适应迭代数据表：展示详细的自适应迭代数据，包括轮次、客户端、τ*、准确率和损失

### 4.4 个性化权重分析页面

**功能描述**：展示个性化权重数据，包括γ权重分布和γ权重趋势。

**使用步骤**：
1. 从首页点击「个性化权重分析」快速入口，进入个性化权重分析页面
2. 在「参数配置」部分，选择要查看的客户端和训练轮次
3. 点击「刷新」按钮，根据配置参数刷新数据
4. 查看「统计摘要」部分，了解总轮次、总客户端、平均个性化准确率和平均全局准确率
5. 查看「γ权重分布图表」，了解不同客户端的γ权重分布
6. 查看「γ权重趋势图表」，了解γ权重随轮次变化的趋势
7. 查看「个性化权重数据表」，了解详细的个性化权重数据
8. 点击「导出CSV」按钮，将个性化权重数据导出为CSV格式

**参数说明**：
- 客户端选择：选择要查看的客户端，可选择多个客户端
- 轮次选择：选择要查看的训练轮次

**结果说明**：
- γ权重分布图表：展示不同客户端的γ权重分布
- γ权重趋势图表：展示不同客户端的γ权重随轮次变化的趋势
- 个性化权重数据表：展示详细的个性化权重数据，包括轮次、客户端、子模型权重、个性化准确率和全局准确率

### 4.5 推荐展示页面

**功能描述**：基于已训练模型，获取不同城市的个性化旅游消费推荐，并支持多城市对比。

**使用步骤**：
1. 从首页点击「推荐展示」快速入口，进入推荐展示页面
2. 在「参数配置」部分，选择要查看的城市、输入用户ID、设置Top-K值和训练轮次
3. 点击「生成推荐」按钮，根据配置参数生成推荐结果
4. 查看「推荐结果」部分，了解个性化推荐的详细信息
5. 查看「推荐结果可视化」部分，了解推荐结果的评分和热度分布
6. 在「多城市对比」部分，选择要对比的城市，点击「生成对比」按钮，生成多城市推荐对比结果
7. 查看「对比结果」部分，了解不同城市的推荐结果差异
8. 点击「导出CSV」按钮，将推荐结果导出为CSV格式

**参数说明**：
- 城市选择：选择要查看的城市
- 用户ID：输入用户ID，用于生成个性化推荐
- Top-K：设置推荐结果数量，即返回前K个推荐项
- 训练轮次：选择训练轮次，使用对应轮次的模型参数

**结果说明**：
- 推荐结果：展示个性化推荐结果，包括排名、景点名称、类别、评分、价格和热度
- 推荐结果可视化：展示推荐结果的评分和热度可视化
- 对比结果：展示不同城市的推荐结果对比

### 4.6 综合对比页面

**功能描述**：评估系统整体性能，展示创新点效果，包括系统性能概览、训练轮次对比、客户端性能对比和创新点评估。

**使用步骤**：
1. 从首页点击「综合对比」快速入口，进入综合对比页面
2. 在「参数配置」部分，选择训练轮次和要对比的维度
3. 点击「生成综合对比」按钮，根据配置参数生成综合对比结果
4. 查看「系统性能概览」部分，了解系统的平均压缩比例、平均τ*、平均个性化准确率和平均推荐评分
5. 查看「训练轮次对比」部分，了解不同训练轮次的压缩比例、准确率和个性化准确率对比
6. 查看「客户端性能对比」部分，了解不同客户端的压缩比例、τ*和个性化准确率对比
7. 查看「创新点评估」部分，了解通信开销低、个性化推荐、自适应迭代和系统稳定性的评估结果
8. 查看「详细对比数据」部分，了解系统与传统联邦学习的详细对比数据

**参数说明**：
- 训练轮次：选择训练轮次，用于评估对应轮次的系统性能
- 对比维度：选择要对比的维度，如压缩比例、准确率、个性化准确率等

**结果说明**：
- 系统性能概览：展示系统的整体性能指标
- 训练轮次对比：展示不同训练轮次的性能对比
- 客户端性能对比：展示不同客户端的性能对比
- 创新点评估：展示系统创新点的评估结果
- 详细对比数据：展示系统与传统联邦学习的详细对比数据

## 5. 功能使用示例

### 5.1 示例1：查看通信压缩效果

**场景**：用户想了解系统的通信压缩效果，查看不同客户端在不同轮次的压缩比例变化。

**操作步骤**：
1. 进入通信压缩分析页面
2. 选择客户端1、2、3
3. 设置轮次范围为1-50
4. 点击「刷新」按钮
5. 查看压缩比例图表，分析压缩比例变化趋势
6. 查看通信统计表，了解详细的通信统计数据

**预期结果**：
- 压缩比例图表显示三个客户端的压缩比例随轮次变化的曲线
- 通信统计表显示详细的通信统计数据，包括原始大小、压缩后大小、压缩比例等

### 5.2 示例2：获取个性化推荐

**场景**：用户想为用户ID为1的用户获取北京的个性化旅游消费推荐，返回前5个推荐项。

**操作步骤**：
1. 进入推荐展示页面
2. 选择城市为「北京」
3. 输入用户ID为「1」
4. 设置Top-K为「5」
5. 选择训练轮次为「10」
6. 点击「生成推荐」按钮
7. 查看推荐结果，了解个性化推荐的详细信息

**预期结果**：
- 推荐结果显示北京的前5个个性化旅游消费推荐项
- 推荐结果包括排名、景点名称、类别、评分、价格和热度

### 5.3 示例3：比较不同城市的推荐结果

**场景**：用户想比较北京和上海的个性化旅游消费推荐结果，了解两个城市的推荐差异。

**操作步骤**：
1. 进入推荐展示页面
2. 在「多城市对比」部分，选择城市为「北京」和「上海」
3. 输入用户ID为「1」
4. 设置Top-K为「5」
5. 选择训练轮次为「10」
6. 点击「生成对比」按钮
7. 查看对比结果，了解两个城市的推荐结果差异

**预期结果**：
- 对比结果显示北京和上海的推荐结果
- 可以直观比较两个城市的推荐差异

## 6. 常见问题与解决方案

### 6.1 问题：系统状态显示「系统运行中，缺少数据」

**解决方案**：确保数据文件已正确放置在 `data/` 目录下，包括通信数据、γ权重数据、τ*数据和模型数据。

### 6.2 问题：推荐结果为空或不符合预期

**解决方案**：检查用户ID是否有效，训练轮次是否正确，以及数据文件是否完整。

### 6.3 问题：图表无法显示或显示异常

**解决方案**：确保浏览器支持Chart.js库，可尝试刷新页面或使用其他现代Web浏览器。

### 6.4 问题：数据导出失败或导出文件为空

**解决方案**：确保页面中有数据可导出，可尝试刷新页面后重新导出。

### 6.5 问题：后端服务启动失败，提示缺少依赖模块

**解决方案**：确保已安装所有必要的依赖模块，可使用以下命令安装：

```bash
pip install -r backend/requirements.txt
```

## 7. 功能扩展与定制

### 7.1 添加新城市

1. 在后端的 `system.py` 文件中修改 `available_cities` 列表
2. 添加对应城市的数据文件到 `data/` 目录

### 7.2 添加新客户端

在后端的API接口中添加新的客户端数据，确保数据文件包含对应客户端的信息。

### 7.3 添加新图表

在前端的 `ChartGenerator` 模块中添加新的图表类型，支持更多的数据可视化需求。

### 7.4 自定义数据

用户可以通过修改后端的数据文件来自定义系统使用的数据，包括：
- **通信数据**：修改 `data/communication/` 目录下的数据文件
- **γ权重数据**：修改 `data/gamma/` 目录下的数据文件
- **τ*数据**：修改 `data/tau/` 目录下的数据文件
- **模型数据**：修改 `data/models/` 目录下的数据文件

## 8. 版本历史

| 版本 | 日期 | 修改内容 | 修改人 |
|------|------|----------|--------|
| v1.0 | 2026-02-18 | 初始版本，详细说明系统的各个功能模块的使用方法 | 系统生成 |
